<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record model="ir.ui.view" id="nantian_erp_contract_user">
            <field name="name">南天服务合同</field>
            <field name="model">nantian_erp.contract</field>
            <field name="arch" type="xml">
                <form string="nantian_erp_contract_user" >
                    <header>
                        <button name="going"  string="进行中" states="going" class="oe_highlight" invisible="True"/>
                        <button name="off" string="关闭" states="off" class="oe_highlight" invisible="True"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                        <div class="oe_title">
                        	<label for="name" class="oe_edit_only" string="合同名称"/>
                        	<h1><field name="name" /></h1>
                        </div>
                     <group>
                        <group>
                            <field name="header_id" options='{"limit": 20,"no_open":True,"no_create":1,"no_create_edit":1}'/>
                            <field name="customer_id" options='{"limit": 20,"no_open":True,"no_create":1,"no_create_edit":1}' required="True"/>
                            <field name="date_start"  />
                            <field name="date_end" />
                            <field name="category" />
                            <field name="need_employee_count"  attrs="{'invisible': [('category','=','维保合同')]}"/>
                            <field name="employee_count" attrs="{'invisible': [('category','=','维保合同')]}"/>
                        </group>
                        <group >
                            <field name="hr_requirements" attrs="{'invisible': [('category','=','维保合同')]}"/>
                            <field name="resource_requirements" attrs="{'invisible': [('category','=','维保合同')]}"/>
                            <field name="service_content" attrs="{'invisible': [('category','=','服务合同')]}"/>

                        </group>

                    </group>
                    <group>
                            <field name="other"/>
                            <field name="jobs_ids"  attrs="{'invisible': [('category','=','维保合同')]}">
                                <tree  editable="bottom">
                                    <field name="name" />
                                    <field name="instruction" />
                                    <field name="price"/>
                                    <field name="unit" />
                                    <field name="amount" />
                                    <field name="unit_amount" />
                                    <field name="rate"/>
                                    <field name="subtotal"/>
                                    <field name="rated_moneys"/>
                                </tree>
                            </field>
                            <field name="detail_ids"  attrs="{'invisible': [('category','=','服务合同')]}">
                                <tree  editable="bottom">
                                    <field name="name" />
                                    <field name="instruction" />
                                    <field name="price"/>
                                    <field name="unit" />
                                    <field name="amount" />
                                    <field name="rate"/>
                                    <field name="subtotal"/>
                                    <field name="rated_moneys"/>
                                </tree>
                            </field>
                            <group class="oe_subtotal_footer oe_right" colspan="2" name="money_total">
                                <field name="money" widget="monetary" />
                                <field name="money_tax" widget="monetary" />
                                <field name="money_total" class="oe_subtotal_footer_separator" widget="monetary" />
                            </group>
                            <field name="collection_ids"  >
                                <tree  editable="bottom">
                                    <field name="name" />
                                    <field name="evaluate_money" />
                                    <field name="conditions" />
                                    <field name="date" />
                                    <field name="money"/>
                                    <field name="rate"/>
                                    <field name="rated_moneys"/>
                                    <field name="money_total"/>
                                    <field name="state" readonly="True"/>
                                </tree>
                            </field>
                            <group class="oe_subtotal_footer oe_right" colspan="2" name="collection_money_total">
                                <field name="collection_money" widget="monetary" />
                                <field name="collection_money_tax" widget="monetary" />
                                <field name="collection_money_total" class="oe_subtotal_footer_separator" widget="monetary" />
                            </group>
                    </group>
                </form>
            </field>
        </record>
        <record model="ir.ui.view" id="nantian_erp_contract_user_tree">
            <field name="name">南天服务合同</field>
            <field name="model">nantian_erp.contract</field>
            <field name="arch" type="xml">
                <tree string="nantian_erp_contract_user_tree" >
                    <field name="name" />
                    <field name="header_id" />
                    <field name="customer_id"/>
                    <field name="date_start"  />
                    <field name="date_end" />
                    <field name="need_employee_count" />
                    <field name="employee_count" />
                    <field name="next_collection_date" />
                </tree>
            </field>
        </record>
        <record id="nantian_erp_contract_filter" model="ir.ui.view">
            <field name="name">nantian_erp_contract_search</field>
            <field name="model">nantian_erp.contract</field>
            <field name="arch" type="xml">
                <search string="Search">
                    <field name="name" />
                    <!--<filter string="" name="done" domain="[('', '=','done')]"/>-->
                    <separator/>
                    <group expand="0" string="分组">
                        <filter string="合同客户" name="customer" context="{'group_by':'customer_id'}"/>
                        <filter string="负责人" name="applicant_id" context="{'group_by':'header_id'}"/>
                        <filter string="合同状态" name="state" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>
        
    </data>
</openerp>